<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Solid CDN - Ordered List Keyed</title>
</head>
<body>
  <div id="app"></div>
  <script type="module">
    import { createSignal, For } from "https://esm.sh/solid-js@1.9.3";
    import { render } from "https://esm.sh/solid-js@1.9.3/web";
    import html from "https://esm.sh/solid-js@1.9.3/html";

    const createItem = () => ({
      id: `item-${Date.now()}-${Math.random().toString(36).slice(2, 8)}`,
      message: "Hello, World!"
    });

    function App() {
      const [items, setItems] = createSignal([]);

      const refresh = () => {
        const next = items().map((item) => ({
          ...item,
          message: item.message.replace(" (UPDATED!)", "")
        }));

        next.unshift(createItem());

        if (next.length > 5 && next[1]) {
          next[1].message += " (UPDATED!)";
        }

        setItems(next);
      };

      return html`<div>
        <ol>
          <${For} each=${items()}>
            ${(item) => html`<li>${item.message}</li>`}
          </${For}>
        </ol>
        <button type="button" onClick=${refresh}>Refresh</button>
      </div>`;
    }

    render(App, document.getElementById("app"));
  </script>
</body>
</html>

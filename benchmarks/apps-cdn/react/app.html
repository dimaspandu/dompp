<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>React CDN - Mini Apps Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

  <style>
    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: system-ui, -apple-system, sans-serif;
      background: linear-gradient(135deg, #a8e6ff, #3ddad7);
      background-attachment: fixed;
      color: #1f2d3d;
    }

    .container {
      padding: 24px;
      max-width: 1200px;
      margin: auto;
    }

    h1 {
      text-align: center;
      color: white;
      font-weight: 600;
      letter-spacing: 0.5px;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 24px;
      margin-top: 24px;
    }

    .card {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(6px);
      border-radius: 16px;
      padding: 18px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }

    .card:hover {
      transform: translateY(-4px);
      box-shadow: 0 16px 35px rgba(0, 0, 0, 0.12);
    }

    .card h3 {
      margin-top: 0;
      font-weight: 600;
      color: #0f4c5c;
    }

    button {
      padding: 8px 12px;
      margin: 6px 6px 0 0;
      border-radius: 8px;
      border: none;
      cursor: pointer;
      font-weight: 500;
      color: white;
      background: linear-gradient(135deg, #4facfe, #00c9a7);
      transition: all 0.2s ease;
    }

    button:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 15px rgba(0, 201, 167, 0.4);
    }

    button:active {
      transform: translateY(0px);
      box-shadow: none;
    }

    input, textarea {
      width: 100%;
      padding: 8px;
      margin-top: 8px;
      border-radius: 8px;
      border: 1px solid #dceef3;
      outline: none;
      transition: border 0.2s ease, box-shadow 0.2s ease;
    }

    input:focus, textarea:focus {
      border-color: #3ddad7;
      box-shadow: 0 0 0 3px rgba(61, 218, 215, 0.2);
    }

    ul {
      padding-left: 18px;
    }

    .clock {
      font-size: 26px;
      font-weight: 600;
      text-align: center;
      color: #0f4c5c;
    }

    .footer {
      text-align: center;
      margin-top: 40px;
      color: white;
      opacity: 0.85;
      font-size: 14px;
    }
  </style>
</head>
<body>
  <div id="app"></div>

  <script type="module">
    import React, { useState, useEffect } from "https://esm.sh/react@18.3.1";
    import { createRoot } from "https://esm.sh/react-dom@18.3.1/client";

    const e = React.createElement;

    /* ---------------- COUNTER ---------------- */
    function CounterWidget() {
      const [count, setCount] = useState(0);

      return e("div", { className: "card" },
        e("h3", null, "Counter"),
        e("h2", null, count),
        e("button", { onClick: () => setCount(count - 1) }, "-1"),
        e("button", { onClick: () => setCount(count + 1) }, "+1"),
        e("button", { onClick: () => setCount(0) }, "Reset")
      );
    }

    /* ---------------- TODO ---------------- */
    function TodoWidget() {
      const [todos, setTodos] = useState([]);
      const [text, setText] = useState("");

      function addTodo() {
        if (!text.trim()) return;
        setTodos([...todos, text]);
        setText("");
      }

      return e("div", { className: "card" },
        e("h3", null, "Todo List"),
        e("input", {
          value: text,
          onChange: (ev) => setText(ev.target.value),
          placeholder: "Add task..."
        }),
        e("button", { onClick: addTodo }, "Add"),
        e("ul", null,
          todos.map((todo, i) =>
            e("li", { key: i }, todo)
          )
        )
      );
    }

    /* ---------------- CLOCK ---------------- */
    function ClockWidget() {
      const [time, setTime] = useState(new Date());

      useEffect(() => {
        const interval = setInterval(() => {
          setTime(new Date());
        }, 1000);
        return () => clearInterval(interval);
      }, []);

      return e("div", { className: "card" },
        e("h3", null, "Live Clock"),
        e("div", { className: "clock" },
          time.toLocaleTimeString()
        )
      );
    }

    /* ---------------- NOTES ---------------- */
    function NotesWidget() {
      const [note, setNote] = useState("");

      return e("div", { className: "card" },
        e("h3", null, "Quick Notes"),
        e("textarea", {
          rows: 4,
          value: note,
          onChange: (ev) => setNote(ev.target.value),
          placeholder: "Write something..."
        })
      );
    }

    /* ---------------- CALCULATOR ---------------- */
    function CalculatorWidget() {
      const [value, setValue] = useState("");

      function calculate() {
        try {
          setValue(eval(value).toString());
        } catch {
          setValue("Error");
        }
      }

      return e("div", { className: "card" },
        e("h3", null, "Mini Calculator"),
        e("input", {
          value: value,
          onChange: (ev) => setValue(ev.target.value),
          placeholder: "e.g. 2 + 2 * 3"
        }),
        e("button", { onClick: calculate }, "=")
      );
    }

    /* ---------------- MAIN APP ---------------- */
    function App() {

      console.log("App executed once?");

      const [darkMode, setDarkMode] = useState(false);

      const themeStyle = {
        background: darkMode
          ? "linear-gradient(135deg, #1e1e2f, #111)"
          : "linear-gradient(135deg, #a8e6ff, #3ddad7)",
        minHeight: "100vh",
        transition: "all 0.3s ease"
      };

      return e("div", { style: themeStyle },
        e("div", { className: "container" },
          e("h1", { style: { color: darkMode ? "#fff" : "#fff" } },
            "Mini Apps Dashboard"
          ),

          /* ðŸ”¥ GLOBAL STATE WIDGET */
          e("div", { className: "card" },
            e("h3", null, "Global Theme Toggle (Top-Level State)"),
            e("p", null, "This state lives in App."),
            e("button", {
              onClick: () => setDarkMode(!darkMode)
            }, darkMode ? "Switch to Light Mode" : "Switch to Dark Mode")
          ),

          e("div", { className: "grid" },
            e(CounterWidget),
            e(TodoWidget),
            e(ClockWidget),
            e(NotesWidget),
            e(CalculatorWidget)
          ),

          e("div", { className: "footer" },
            "Built with React via CDN"
          )
        )
      );
    }

    createRoot(document.getElementById("app")).render(e(App));
  </script>
</body>
</html>
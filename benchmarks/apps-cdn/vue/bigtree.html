<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Vue CDN - Big Tree</title>
  <style>
    body { font-family: system-ui; max-width: 960px; margin: 0 auto; padding: 24px; }
    section { margin-bottom: 24px; }
    .grid { display: grid; grid-template-columns: repeat(2, minmax(0, 1fr)); gap: 16px; }
    .card { border: 1px solid #ddd; border-radius: 8px; padding: 12px; }
    ul, ol { padding-left: 20px; }
    button { margin-right: 8px; }
    .static-grid { display: grid; grid-template-columns: repeat(4, minmax(0, 1fr)); gap: 8px; }
    .static-cell { border: 1px dashed #ccc; padding: 6px; border-radius: 6px; font-size: 12px; }
  </style>
</head>
<body>
  <div id="app">
    <h1>Vue Big Tree Workload</h1>
    <p>Localized state + keyed list updates.</p>
    <div class="grid">
      <section class="card">
        <h3>Counter</h3>
        <h2>Count: {{ count }}</h2>
        <button type="button" @click="count += 1">+1</button>
      </section>
      <section class="card">
        <h3>Todos</h3>
        <ul>
          <li v-for="todo in todos" :key="todo.id">{{ todo.text }}</li>
        </ul>
        <button type="button" @click="addTodo">Add Todo</button>
      </section>
      <section class="card">
        <h3>Ordered List Keyed</h3>
        <ol>
          <li v-for="item in items" :key="item.id">{{ item.message }}</li>
        </ol>
        <button type="button" @click="refreshList">Refresh List</button>
      </section>
      <section class="card">
        <h3>Static Tree (200 nodes)</h3>
        <div class="static-grid">
          <div v-for="cell in staticCells" :key="cell" class="static-cell">Static {{ cell }}</div>
        </div>
      </section>
    </div>
  </div>

  <script src="https://unpkg.com/vue@3/dist/vue.global.prod.js"></script>
  <script>
    const createTodo = (index) => ({ id: `todo-${index}`, text: `Todo ${index}` });
    const createListItem = () => ({
      id: `item-${Date.now()}-${Math.random().toString(36).slice(2, 8)}`,
      message: "Hello, World!"
    });

    Vue.createApp({
      data() {
        return {
          count: 0,
          todos: Array.from({ length: 100 }, (_, i) => createTodo(i)),
          items: Array.from({ length: 50 }, () => createListItem()),
          staticCells: Array.from({ length: 200 }, (_, i) => i + 1),
        };
      },
      methods: {
        addTodo() {
          this.todos = [...this.todos, createTodo(this.todos.length)];
        },
        refreshList() {
          const next = this.items.map((item) => ({
            ...item,
            message: item.message.replace(" (UPDATED!)", "")
          }));
          next.unshift(createListItem());
          if (next.length > 5 && next[1]) {
            next[1].message += " (UPDATED!)";
          }
          this.items = next;
        }
      }
    }).mount("#app");
  </script>
</body>
</html>
